##### 	我们在实际开发中都会使用连接池。

##### 	因为它可以减少我们获取连接所消耗的时间。



# 关于数据库连接的说明

转自：https://www.cnblogs.com/niuben/p/10835834.html

#### 使用场景

<u>数据库连接是一种关键的、有限的、昂贵的资源</u>，这一点在多用户的网页应用程序中体现得尤为突出。对数据库连接的管理能显著影响到整个应用程序的伸缩性和健壮性，影响到程序的性能指标。数据库连接池正是针对这个问题提出来的。

#### 原理

连接池基本的思想是在系统初始化的时候，将数据库连接作为对象存储在内存中，当用户需要访问数据库时，<u>并非建立一个新的连接，而是从连接池中取出一个已建立的空闲连接对象。使用完毕后，用户也并非将连接关闭，而是将连接放回连接池中，以供下一个请求访问使用</u>。而连接的建立、断开都由连接池自身来管理。同时，还可以通过设置连接池的参数来控制连接池中的初始连接数、连接的上下限数以及每个连接的最大使用次数、最大空闲时间等等。也可以通过其自身的管理机制来监视数据库连接的数量、使用情况等。

其实就是一个用于储存连接的容器

容器其实就是一个集合对象，而且该集合必须是线程安全的，不能有两个线程拿到同一个连接

该集合还必须实现队列的特性：先进先出。



##### 注意事项

数据库连接池在初始化时将创建一定数量的数据库连接放到连接池中，这些数据库连接的数量是由最小数据库连接数制约。无论这些数据库连接是否被使用，连接池都将一直保证至少拥有这么多的连接数量。连接池的最大数据库连接数量限定了这个连接池能占有的最大连接数，当应用程序向连接池请求的连接数超过最大连接数量时，这些请求将被加入到等待队列中。数据库连接池的最小连接数和最大连接数的设置要考虑到下列几个因素：
            \1. 最小连接数
是<u>连接池一直保持的数据库连接，所以如果应用程序对数据库连接的使用量不大，将会有大量的数据库连接资源被浪费。</u>

​            \2. 最大连接数 是连接池能申请的最大连接数，<u>如果数据库连接请求超过此数，后面的数据库连接请求将被加入到等待队列中</u>，这会影响之后的数据库操作。

​            \3. 最小连接数与最大连接数差距最小连接数与最大连接数相差太大，那么最先的连接请求将会获利，之后超过最小连接数量的连接请求等价于建立一个新的数据库连接。不过， 这些新建的连接在使用完不会马上被释放，它将被放到连接池中等待重复使用或是空闲超时后被释放。



##### mybatis中的连接池:

dataSource的type属性是提供我们对数据厍连接方式的配置：UNPOOLED（非连接池数据库）、POOLED（连接池数据库）、JNDI（JNDI数据源）、自定义数据源。

JNDI：	 

​			采用服务器提供的JNDI技术实现，来获取DataSource对象，不同的服务器所能拿到DataSource是不一样。
​		    注意：如果不是web或者maven的war工程，是不能使用的。
​		    我们课程中使用的是tomcat服务器，采用连接池就是dbcp连接池。